# Тестирование Django проектов
![Python](https://img.shields.io/badge/Python-3.9-blue?logo=python)
![Django](https://img.shields.io/badge/Django-3.2-green?logo=django)
![Pytest](https://img.shields.io/badge/Pytest-7.1.3-yellow?logo=pytest)


Этот репозиторий содержит автотесты для двух Django-приложений: **Ya_news** (новостной портал) и **Ya_note** (заметки). 

Тесты, написанные на `pytest` (для Ya_news) и `unittest` (для Ya_note), проверяют корректность отображения контента, логику работы (создание, редактирование, удаление), доступность маршрутов и ограничения доступа, включая уникальность slug, фильтрацию запрещённых слов и редиректы для неавторизованных пользователей.

---

## Установка
Для проверки работоспособности тестов выполните следующие шаги:

1. Клонируйте [репозиторий](https://github.com/KuznetcovIvan/django_testing)
   `git clone https://github.com/KuznetcovIvan/django_testing.git
   `
2. Перейдите в директорию с проектом `cd django_testing`
3. Создайте виртуальное окружение `python -m venv venv`
4. Активируйте окружение `source venv\Scripts\activate` (`source venv/bin/activate` - для Linux/macOS)
5. Установите зависимости `pip install -r requirements.txt`

---

## Запуск тестов
- Для запуска всех тестов  выполните  `bash run_tests.sh`

- Запуск тестов только для Ya_news
    - из корневой директории перейдите в ya_news `cd ya_news`

    - и выполните `pytest news/pytest_tests/`

- Запуск тестов только для Ya_note
    - из корневой директории перейдите в `cd ya_note`
    - и выполните `python manage.py test notes.tests`

---

## Что тестируется
### Ya_news (pytest)
#### Проверки контента [(test_content.py)](ya_news/news/pytest_tests/test_content.py):
- Количество новостей на главной странице (не более 10).
- Сортировка новостей (от новых к старым).
- Сортировка комментариев (от старых к новым).
- Наличие формы комментариев для авторизованных пользователей и её отсутствие для анонимных.

#### Проверки логики [(test_logic.py)](ya_news/news/pytest_tests/test_logic.py):
- Запрет создания комментариев для анонимных пользователей.
- Возможность создания комментариев авторизованными пользователями.
- Запрет использования запрещённых слов в комментариях.
- Возможность редактирования и удаления комментариев только авторами.
- Невозможность редактирования и удаления чужих комментариев.

#### Проверки маршрутов [(test_routes.py)](ya_news/news/pytest_tests/test_routes.py):
- Доступность страниц для разных категорий пользователей (анонимных, авторизованных, авторов, неавторов).
- Редиректы для анонимных пользователей на страницы логина.

#### Конфигурация тестов [(conftest.py)](ya_news/news/pytest_tests/conftest.py):
Определение фикстур: пользователи (автор, читатель), клиенты, новости, комментарии, URL-адреса и редиректы.

### Ya_note (unittest)
#### Проверки контента [(test_content.py)](ya_note/notes/tests/test_content.py):
- Отображение заметок только для их авторов.
- Наличие формы для создания и редактирования заметок у авторизованных пользователей.

#### Проверки логики [(test_logic.py)](ya_note/notes/tests/test_logic.py):
- Запрет создания заметок анонимными пользователями.
- Возможность создания заметок авторизованными пользователями.
- Автогенерация slug, если он не указан.
- Запрет создания заметок с неуникальным slug.
- Возможность редактирования и удаления заметок только авторами.
- Невозможность редактирования и удаления чужих заметок.

#### Проверки маршрутов [(test_routes.py)](ya_note/notes/tests/test_routes.py):
- Доступность страниц для разных категорий пользователей.
- Редиректы для анонимных пользователей на страницу логина.


#### Конфигурация тестов [(conftest.py)](ya_note/notes/tests/conftest.py):
Определение базового класса тестов, пользователей, заметок, тестовых данных и URL-адресов.

---

### Технологический стек
- Python 3.9
- Django 3.2.15
- Pytest 7.1.3
- Pytest-django 4.5.2
- Unittest

---

### Автор: [Иван Кузнецов](https://github.com/KuznetcovIvan)
